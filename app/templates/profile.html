{% extends "base.html" %}

{% block content %}

<div class="container">

    {% if current_user == user%}
    <a href="{{ url_for('logout') }}">Log out</a>
    <p>This is your profile.</p>

    {% else %}
    
    <p>Welcome to {{ user.username }}'s profile.</p>
   
    {% endif %}


    <table class="table" id="user-details">
        <tr>
            <th>Username</th>
            <td>{{ user.username }}</td>
        </tr>
        <tr>
            <th>First Name</th>
            <td>{{ user.fname}}</td>
        </tr>
        <tr>
            <th>Last Name</th>
            <td>{{ user.lname}}</td>
        </tr>

        {% if current_user == user %}
        <tr>

            <th>Email</th>
            <td>{{ user.email }}</td>

        </tr>
        {% endif %}
        <tr>
            <th>Position</th>
            <td>{{ user.position }}</td>
        </tr>
        <tr>
            <th>Area of study</th>
            <td>
                {{ user.study }}
            </td>
        </tr>
        <tr>
            <th>Bio</th>
            <td>{{ user.bio }}</td>
        </tr>
    </table>

    {% if posts %}

    <div class="subForum">
        <div class="subForumTitle">
            <h2>{{ user.username }}'s Posts</h2>
        </div>
    </div>

    {% for post in posts %}

    <div class="post">
        {% if current_user == user %}
        <a href="/post/delete/{{post.post_id}}" class="btn active deleteBtn">Delete</a>
        {% endif %}
        <a class='post_title' href="{{ url_for('viewpost', post_id=post.post_id) }}" class="boldInfoLink">{{ post.title }}</a>
        <p>{{ post.topic }}: {{ post.subtopic }}</p>
        <p>{{ post.description }}</p>
        <p>({{ post.timestamp }})</p>
    </div>

    {% endfor %}

    {% endif %}

    {% if comments %}

    <div class="subForum">
        <div class="subForumTitle">
            <h2>{{ user.username }}'s Comments</h2>
        </div>
    </div>

    {% for comment in comments %}
        <div class="post">
            {% if current_user == user %}
            <a href="/comment/delete/{{comment.comment_id}}" class="btn active deleteBtn">Delete</a>
            {% endif %}
            <p>{{ comment.comment_text }}</p>
            <p>{{ comment.timestamp }}</p>
        </div>
    {% endfor %}

    {% endif %}

</div>

{% endblock %}